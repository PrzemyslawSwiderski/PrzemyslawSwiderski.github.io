"use strict";(this.webpackChunkpswidersk_page=this.webpackChunkpswidersk_page||[]).push([[5722],{5722:e=>{e.exports='<h2>Introduction</h2><p>Initially my personal blog page was using the <a href="https://jekyllrb.com/">Jekyll</a> static site generator.\nIt was very well-supported by GitHub at that time (Jan 28, 2016).</p><p>Lately I decided to refresh it. I reinstalled my local system, so I did not have Jekyll Gem package installed anymore.\nSo because of my laziness, I created a whole new site generation engine in Kotlin ðŸ˜….\nOther reason was simply that I am more familiar with Kotlin than Ruby and wanted to try something new especially\nsince there was the new <a href="https://kotlinlang.org/docs/whatsnew20.html">2.0 Kotlin</a> version released ðŸ˜‰.</p><p>To keep it simple, I wanted the new generation engine to work in a similar way as Jekyll.\nIt is processing the Markdown files and generates HTML code based on those.</p><p>In this post I would like to show some technical details of how it was done ðŸ™‚.</p><p>The whole project and repository can be found\n<strong><a href="https://github.com/PrzemyslawSwiderski/PrzemyslawSwiderski.github.io/">HERE</a></strong>.</p><h2>Building with Gradle</h2><p><a href="https://gradle.org/">Gradle</a> is the build system <a href="https://www.jetbrains.com/lp/devecosystem-2023/java/">widely used</a> in\nmany JVM projects.\nSince it is supporting writing build scripts with the Kotlin DSL and has got out off the box Kotlin plugins\nit was pretty clear to use it for the Kotlin project.</p><p>What I like the most is that only the Java RE is required to run the build.\nIt can be invoked by simply calling:</p><ul><li><p><code>./gradlew build</code> on Unix systems</p></li><li><p>or <code>gradlew.bat build</code> on Windows</p></li></ul><p>in the project directory.</p><p>All Java dependencies, Node.js, and NPM packages will be installed in the background.</p><h2>Backend and MD ðŸ‘‰ HTML conversion</h2><p>In order to convert Markdown to HTML files, Kotlin JVM script\n<a href="https://github.com/PrzemyslawSwiderski/PrzemyslawSwiderski.github.io/blob/master/src/jvmMain/kotlin/app/MdToHtmlConverter.kt"><code>MdToHtmlConverter.kt</code></a>\nwas added. It processes the input catalog and produces the output to the specified directory.\nApart from converting the <code>.md</code> files to HTML ones, it copies other files like images and\nproduces <code>markdown-metadata.yaml</code> which is later used for the post\'s entries generation and routes mapping.</p><p>To run the script the <code>generateHtmlFiles</code> task was added. It can be executed solely in a standard way by running:</p><pre><code class="language-commandline">./gradlew generateHtmlFiles\n</code></pre><h2>Frontend</h2><p>IN PROGRESS</p><h2>Development</h2><p>For the local development there is a separate <code>jsRun</code> Gradle task.</p><p>By executing <code>./gradlew jsRun -t</code> Gradle is running the development server locally and rebuilds the application if the\nsource files changes.</p><p>Changes are visible in few seconds:</p><p><img class="responsive-img" src="/pages/posts/how-it-was-created/live-changes.gif" alt="Live reload"></img></p><p>As it can be seen in the <code>jsRun</code> task\'s logs, changes done in <code>content.md</code> file triggered rebuilding because the\nwhole <code>pages</code> catalog was specified as the input of <code>generateHtmlFiles</code> task in\n<a href="https://github.com/PrzemyslawSwiderski/PrzemyslawSwiderski.github.io/blob/master/build.gradle.kts">build.gradle.kts</a>\nfile.\nGradle is somehow able to figure out that the build cache is invalid and due to dependency on <code>jsProcessResources</code> task:</p><pre><code class="language-kotlin">named(&quot;jsProcessResources&quot;) {\n    dependsOn(generateHtmlFiles)\n}\n</code></pre><p>it detects changes and rebuilds the app.</p><p>It is pretty impressive that we can execute some Kotlin JVM code with <code>generateHtmlFiles</code> task and see the output on\nfrontend almost instantly ðŸ˜Ž.</p><h2>CI/CD</h2><p>On each push to master the GitHub action specified\nin <a href="https://github.com/PrzemyslawSwiderski/PrzemyslawSwiderski.github.io/blob/master/.github/workflows/gh-pages.yml">gh-pages.yml</a>\nis invoked. It builds project with Gradle and deploys new static resource by simply pushing output files to <code>gh-pages</code>\nbranch. The push/commit is executed by <a href="https://github.com/peaceiris/actions-gh-pages"><code>peaceiris/actions-gh-pages</code></a>\naction.</p><p>Cool thing is that you can edit MD files directly from GitHub site:</p><p><img class="responsive-img" src="/pages/posts/how-it-was-created/github-edit.png" alt="Edit MD file directly"></img></p><p>and see the changes in a few minutes after\ncommiting the changes to master.</p>'}}]);